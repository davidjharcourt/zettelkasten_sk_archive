(function(e){var h=window.AmazonUIPageJS||window.P,w=h._namespace||h.attributeErrors,b=w?w("DetailPageEbooksAssets",""):h;b.guardFatal?b.guardFatal(e)(b,window):b.execute(function(){e(b,window)})})(function(e,h,w){e.when("A","jQuery","ebooksImageBlockATF","cf").execute(function(b,a,c){function d(a){"undefined"!=typeof SitbReader&&SitbReader.LightboxActions.openReader(c.litbData.litbReftag)}function q(){var a=l.offset(),b=n.offset(),d=b.top-a.top,a=b.left-a.left,b=n.outerWidth(),g=n.outerHeight(),
m=l.outerHeight()-(l.outerHeight()-n.outerHeight())/2;v.css("top",d+z).css("left",a+b-v.width());p.css("position","absolute").css("top",d).css("left",a).width(b).height(g);n.css("position","absolute").css("top","0").css("left","0");k.height(m);(h.innerWidth||document.body.offsetWidth)<c.windowWidthThreshold&&f()}function f(){var a=h.innerWidth||document.body.offsetWidth;if(!(0>=a))if(a>c.windowWidthThreshold){var a=c.configWidths[1],b=a/c.holderRatio,k=c.frontImageWidth,l=c.frontImageHeight;t(a,b,
k,l)}else a<c.windowWidthThreshold&&(a=c.configWidths[0],b=a/c.holderRatio,c.frontImageAspectRatio>c.holderRatio?(k=a,l=k/c.frontImageAspectRatio):(l=b,k=l*c.frontImageAspectRatio),t(a,b,k,l))}function t(b,l,d,g){if(0<b&&0<l&&0<d&&0<g){C.length&&e.length&&(C.css("margin-left",b+c.centerColMargin).removeClass("centerColumn"),e.width(b));var f=l+c.containerMargin;m.width(b).height(f);n.width(d).height(g);p.width(d).height(g);k.height(l-(l-n.outerHeight())/2);b=(k.outerWidth()-n.outerWidth())/2;l=k.outerHeight()-
n.outerHeight();p.css("top",l).css("left",b);v.css("top",l+z).css("left",b+d-v.width());a(this).trigger("imageResize")}}var m=a("#ebooksImageBlock"),r=a("#ebooksImgBlkFront"),g=a("#ebooksImgBlockInlineVideo"),u=a("#ebooksImgBlockInlineVideoSrc");if(m.length){var l=m.find("#ebooks-img-wrapper"),k=m.find("#ebooksImageBlockContainer"),p=m.find("#ebooks-img-canvas"),n=p.find(".frontImage"),e=a("#leftCol"),C=a("#centerCol"),x=a("#ebooksImageBlockOuter"),v=x.find("#ebooksSitbLogo"),x=x.find("#ebooksSitbLogoImg"),
z=parseInt(m.css("margin-top"));q();p.addClass("image-2d");c&&c.litbData&&c.litbData.hasLitb&&c.litbData.litbReftag&&(x.removeClass("a-hidden"),x.click(d),p.click(d),p.addClass("clickableImage"));a(h).resize(f)}else throw Error("Element with id imageBlock is missing");b.on("a:image:load",function(a){g.length&&u.length&&c.hasCoverImageInlineVideo&&(r.hide(),g.show())});b.loadDynamicImage(r)});e.when("A","jQuery","imageThumbNails","ready").execute(function(b,a,c){function d(){0<g.scrollLeft()&&(z=g.scrollLeft(),
z>A?y=g.scrollLeft()-A:(y=0,setTimeout(function(){m.removeClass("enabled")},750)),f(),r.addClass("enabled"))}function q(){g.scrollLeft()+g.width()<v&&(w=v+x-(g.scrollLeft()+g.width()),w>A?y=g.scrollLeft()+A:(y=g.scrollLeft()+w,setTimeout(function(){r.removeClass("enabled")},750)),f(),m.addClass("enabled"))}function f(){g.animate({scrollLeft:y},750)}function t(){var a=h.navigator.userAgent,c=a.indexOf("MSIE "),b=a.indexOf("Trident/"),a=a.indexOf("Edge/");return 0<c||0<b||0<a}var m=a("#thumbs-left"),
r=a("#thumbs-right"),g=a(".thumbnail-container .a-carousel-viewport");b=a(".thumbnail-container .a-carousel");var u=a("#thumbImage-1"),l=a("#thumbImage-6"),k=a("#ebooksImageBlock"),p=a("#ebooksImgBlkFront"),n=a("#ebooksImgBlockInlineVideo"),e=a("#ebooksImgBlockInlineVideoSrc"),C=a(".thumbnail-container .a-carousel .a-carousel-card img"),x=6*c.thumbInlineVideos.length,v=l.width()*c.thumbInlineVideos.length;if(b.length&&g.length&&p.length&&n.length&&e.length&&k.length){var z=0,w=0,A=g.width(),y=0,B=
k.find("#ebooks-img-canvas"),D=k.find("#ebooks-img-wrapper");B.css("left","0");B.width(D.width());a(h).resize(function(){B.css("left","0");B.width(D.width())});u.addClass("selected-thumb");g.bind("mouseenter",function(){m.show(500);r.show(500);0<g.scrollLeft()&&m.addClass("enabled");g.scrollLeft()+g.width()<v&&r.addClass("enabled")});C.mouseover(function(b){var l=a(".thumbnail-container .a-carousel-card .selected-thumb"),k=a("#"+b.target.id);if(l.length&&l[0]===b.target)return!1;b=b.target.parentElement.attributes.getNamedItem("aria-posinset");
null!==b&&(b=parseInt(b.value),l.removeClass("selected-thumb"),k.addClass("selected-thumb"),p.attr("src",c.thumbImages[b-1]),n.attr("poster",c.thumbImages[b-1]),n.hide(),p.show(),e.attr("src",c.thumbInlineVideos[b-1]),n.load(),t()?setTimeout(function(){p.hide();n.show()},1E3):(p.hide(),n.show()))});m.bind("click",function(a){a.preventDefault();d()});r.bind("click",function(a){a.preventDefault();q()})}});e.when("A","jQuery","Airy","ebookVideoReady","ready").execute(function(b,a,c,d){function q(){e=
c.embed({bindings:{play:function(){d.openVideoInFullScreen&&e.enterFullScreen()}},desiredMode:"html",parentId:"ebook-airy-player-container",streamingUrls:[d.videoSource],swfUrl:d.swfUrl})}function f(){try{e.detach()}catch(a){throw Error(a.message);}e={};setTimeout(function(){q()},100)}function t(c){a.ajax("/gp/digital/fiona/ajax/reftagCall.html/ref\x3d"+(d.refTag+c),{method:"get",cache:!1});document.body.style.overflow="hidden";g.removeClass("ebook-video-overlay-hidden");e.play();setTimeout(function(){g.addClass("ebook-overlay-on");
u.addClass("ebook-overlay-on");l.addClass("ebook-overlay-on")},10)}function m(){try{e.pause()}catch(a){throw Error(a.message);}document.body.style.overflow="visible";g.removeClass("ebook-overlay-on");u.removeClass("ebook-overlay-on");l.removeClass("ebook-overlay-on");setTimeout(function(){g.addClass("ebook-video-overlay-hidden");f()},150)}var e,g=a("#ebook-video-overlay"),u=a("#ebook-lightbox"),l=a("#ebook-lightbox-video-close");b=a("#ebooksImageBlock");var k=a("#ebooks-main-image-container");if(!g.length||
"undefined"===typeof d)throw Error("Video player not found");q();a("#ebook-video-play").bind("click",function(a){a.preventDefault();t("_text")});l.bind("click",function(a){a.preventDefault();m()});a("#ebook-lightbox-dark").bind("click",function(){m()});if(b.length){var p=/Edge\/|Trident\/|MSIE /.test(h.navigator.userAgent);d.showVideoPreviewTextOnCoverImageHover&&k.length&&!p&&(k.addClass("ebookPreviewVideo"),k=document.createElement("div"),k.innerHTML=d.watchVideoText,k.setAttribute("class","ebookPreviewVideoText"),
document.getElementById("ebooks-main-image-container").appendChild(k),b.bind("click",function(a){a.preventDefault();t("_img")}))}});e.when("A","jQuery","ebooksBackgroundImageLoad","cf").execute(function(b,a,c){function d(a,c){var b=document.getElementById(a);if("undefined"!==typeof b&&null!==b){var d=b.contentDocument;"undefined"!==typeof d&&null!==d&&(b=d.body,d=d.getElementById(c),"undefined"!==typeof b&&"undefined"!=typeof d&&null!==b&&null!==d&&(b.style.background="transparent",d.allowTransparency=
"true"))}}var q=a("#a-page");q.css("background-size","100%");var f=a(".a-expander-partial-collapse-header"),e=a("#dbs-nav-section");c.displayBackgroundImage?(q.css("background-repeat","no-repeat"),d("bookDesc_iframe","iframeContent"),a(function(){d("product-description-iframe","pdIframeContent");q.css("background-image","url("+c.backgroundImageUrl+")")})):c.displayBackgroundPattern&&(q.css("background-repeat","repeat-y"),q.css("background-image","url("+c.backgroundImageUrl+")"),f.length&&(f.css("background-image",
"url("+c.backgroundImageUrl+")"),f.css("background-size",h.innerWidth+"px"),b=a("#ebooksProductDescriptionExpander"),b=(h.innerWidth-b.width())/2,f.css("background-position","-"+b+"px"),f.css("background-repeat","no-repeat")),e.length&&(e.css("background-image","url("+c.backgroundImageUrl+")"),e.css("background-size","100%")));a(h).resize(function(){c.displayBackgroundImage&&(1E3>h.innerWidth?q.css("background-size","1000px"):q.css("background-size","100%"));f.length&&f.css("background-size",h.innerWidth+
"px");e.length&&f.css("background-size",h.innerWidth+"px")})});e.when("A","jQuery","atf").execute(function(b,a){var c=a("#udpKcpAppAdImage"),d=a("#udpComiXologyAd");c.length&&b.loadHiResImage(c);d.length&&b.loadHiResImage(d)});e.when("A","jQuery","cf").execute(function(b,a){a('a[href^\x3d"#kindle-illustrated-learn-more"]').click(function(b){b.preventDefault();var d=this.hash;b=a(d).offset().top-100;a("html, body").stop().animate({scrollTop:b},1200,"swing",function(){h.location.hash=d})})});e.when("A",
"jQuery","contentQualityWidgetReady").execute(function(b,a,c){a.ajax("/gp/digital/fiona/ajax/reftagCall.html/ref\x3d"+c.onloadReftag,{method:"get",cache:!1});b.on("a:popover:show:kcqPopverPreload",function(){a.ajax("/gp/digital/fiona/ajax/reftagCall.html/ref\x3d"+c.hoverOverReftag,{method:"get",cache:!1})})});e.when("A","jQuery","ready","atf").execute(function(b,a){var c=b.state("goodreadsFacebubblesState");void 0!==c&&b.ajax("/kindle-dbs/external-service/goodreads-facebubbles",{method:"get",params:{profileId:c.goodreadsProfileId,
asin:c.asin},success:function(b){a("#goodreads-facebubble").append(b)}})});e.when("A","jQuery","atf","a-carousel-framework").execute(function(b,a,c,d){function e(b){a.ajax("/kindle-dbs/reftag?ref_\x3d"+b,{method:"get",data:t})}function f(b,c){var d=a(h).scrollTop(),e=a(h).scrollLeft(),l=e+a(h).width(),k=d+a(h).height(),f=a(c).offset();f.right=f.left+a(c).outerWidth();f.bottom=f.top+a(c).outerHeight();return!(f.right<e||f.left>l||f.top>k||f.bottom<d)}var t={pageType:"featureAwareness",subPageType:"featureAwarenessShoveler",
hitType:"dataOnly"};d.onInit("faw-carousel",function(c){function d(b,k){var g=a("\x3cimg\x3e");g.load(function(){f(void 0,k)&&a(k).attr("aria-posinset")==c.getAttr("firstVisibleItem")&&(a(k).find(".fawPrimaryImage").attr("src",a(this).attr("src")),a(k).addClass("loadedCard"),e(a(k).data("gifTag")))});g.attr("src",a(k).data("gifUrl"))}function g(b,d){f(void 0,d)&&a(d).attr("aria-posinset")==c.getAttr("firstVisibleItem")||(a(d).find(".fawPrimaryImage").attr("src",a(d).data("imgUrl")),a(d).removeClass("loadedCard"))}
function h(){setTimeout(function(){a(".fawCarouselCard").eq(c.getAttr("firstVisibleItem")-1).filter(f).not(".loadedCard").each(d);a(".fawCarouselCard").filter(".loadedCard").each(g)},300)}b.on.afterLoad(h);b.on.scroll(h);b.on("a:carousel:faw-carousel:change:firstVisibleItem",function(b){b=c.getAttr("totalPages");var d=a("#fawCarousel").width(),f=a(".fawCarouselCard").outerWidth(),d=Math.trunc(d/f),f=a(".faw-carousel-left-button"),e=a(".faw-carousel-right-button");"1"==c.getAttr("firstVisibleItem")?
(f.addClass("aok-hidden"),e.removeClass("aok-hidden")):b-(c.getAttr("firstVisibleItem")-1)==d?(f.removeClass("aok-hidden"),e.addClass("aok-hidden")):(f.removeClass("aok-hidden"),e.removeClass("aok-hidden"));h()});a(".fawVideoTrigger").bind("click",function(b){b.preventDefault();b=a(this).parent(".fawCarouselCard").attr("aria-posinset")-1;a(".faw-modal").css("display","inline");a(".faw-modal").css("visibility","visible");var c=playList[b];a("#fawIframe").attr("src",c);a("#fawIframe").attr("index",
b);var c=playList.length,d=b+1+" of "+c;a(".videoIndex").text(d);0==b?(a(".previous-video").css("visibility","hidden"),a(".next-video").css("visibility","visible")):b==c-1?(a(".next-video").css("visibility","hidden"),a(".previous-video").css("visibility","visible")):(a(".previous-video").css("visibility","visible"),a(".next-video").css("visibility","visible"));e(a(this).data("refTag"));return!1});a(".previous-video").bind("click",function(b){b=a("#fawIframe").attr("index");1==b?a(".previous-video").css("visibility",
"hidden"):a(".previous-video").css("visibility","visible");a(".next-video").css("visibility","visible");var c=b+" of "+playList.length;a(".videoIndex").text(c);b=--b;c=playList[b];a("#fawIframe").attr("src",c);a("#fawIframe").attr("index",b);e(refTagList[b])});a(".next-video").bind("click",function(b){var c=a("#fawIframe").attr("index");c==playList.length-1-1?(a(".previous-video").css("visibility","visible"),a(".next-video").css("visibility","hidden")):(a(".previous-video").css("visibility","visible"),
a(".next-video").css("visibility","visible"));b=++c;var d=playList[b];a("#fawIframe").attr("src",d);a("#fawIframe").attr("index",b);c=c+1+" of "+playList.length;a(".videoIndex").text(c);e(refTagList[b])});a(".close-video").bind("click",function(b){a("#fawModal").css("display","none")});a(".fawCarouselCard").bind("mouseenter",function(b){b.preventDefault();b=a(".loadedCard").parent(".fawCarouselCard");a(".loadedCard").attr("src",a(b).attr("data-img-url"));a(".loadedCard").removeClass("loadedCard");
b=a(this).find(".fawPrimaryImage");a(b).attr("src",a(this).attr("data-gif-url"));a(b).addClass("loadedCard")})})});e.when("a-carousel-framework","a-carousel-display-fawdisplay").execute(function(b,a){b.registerStrategy("display","fawDisplay",a)});e.when("A","jQuery","a-carousel-constants").register("a-carousel-display-fawdisplay",function(b,a,c){var d={};d[c.PAGE_SIZE]=1;var e,f;return{initAttrs:d,init:function(a){a.dom.$carousel.children("li").css("visibility","visible");e=a.getAttr(c.SET_SIZE);
f=260*e;a.dom.$carousel.width(f);a.updateDimensionsCache({carousel:{width:f},items:b.map(b.range(e),function(){return{width:250,outerWidth:260}})});this.repaint(a)},repaint:function(b){var d=b.getDimensions().viewport.width;b.setAttr(c.PEEK_WIDTH,(d-250)/2,!1);a(".faw-carousel-right-button").css("left",d-15+"px");f<=d?a(".faw-carousel-buttons").css("display","none"):a(".faw-carousel-buttons").css("display","inline")},resize:function(a,b){b.viewport&&void 0!==b.viewport.width&&this.repaint(a)}}});
e.when("A","ready").execute(function(b){var a=!1,c=b.state("deliverToState");if(c){var d=c.deliverToDropdownName;c.asinRequiresSecureDelivery&&e.when("A","a-alert","a-dropdown").execute(function(a,b,e){var h=b(".ebookBuyboxDrmDeliverToAlert"),r=c.customerDeviceMap,g=!1,u=function(a){var b=a.message;a.actionLinkHref&&a.actionLinkText&&(b=b+' \x3ca class\x3d"a-link-normal" href\x3d"'+a.actionLinkHref+'"\x3e'+a.actionLinkText+"\x3c/a\x3e");h.html(b).show();ue&&ue.count&&!g&&ue.count("deliverToDRMWarningDisplayCount",
1);g=!0};(b=r[c.dropdownDefaultOption].warningMessage)&&u(b);a.on(d,function(b){var c=r[b.value].warningMessage;c?u(c):h.hide();a.$(".ebookBuyboxDeliverToDropdown").each(function(a,c){e.getSelect(c).setValue(b.value)})})});b.on(d,function(b){ue&&ue.count&&!a&&(ue.count("deliverToSelectionCount",1),c.isTextbook&&ue.count("deliverToSelectionForEtextbookCount",1),a=!0)})}});"use strict";e.when("A","jQuery","ready").register("accordionInstrumentation",function(b,a){var c=h.ue,d,e=function(){this.accordionType=
"";this.accordionCounterId="ebookAccordion";this.setAccordionCounterId=function(a){this.accordionCounterId=a;this.accordionType||(this.accordionType=a)};this.addRowsToCounterId=function(a){a=a.replace(/([^\[\],\s]+)/g,'"$\x26"').toLowerCase();if(a=JSON.parse(a)){for(row in a)this.accordionCounterId+="-"+a[row];c&&c.count&&c.count(this.accordionCounterId,0)}};this.accordionSwitch=function(){c&&c.count&&c.count(this.accordionCounterId,1+(c.count(this.accordionCounterId)||0))};this.buttonClick=function(a){var b=
"ebookUnifiedBuybox";this.accordionType&&(b=this.accordionType);c&&c.count&&c.count(b+"-"+a,c.count(this.accordionCounterId)||0)}};return{counter:function(){d||(d=new e);return d}}});e.when("A","nfcxMessageMetrics").execute(function(b,a){b.on("a:popover:hide:NfcxPopover",function(b){c("Nfcx:message:popup:close:"+a.nfcxWeblabTreatment);d()});b.on("a:popover:show:NfcxPopover",function(b){c("Nfcx:message:popup:open:"+a.nfcxWeblabTreatment);d()});var c=function(a){h.ue&&ue.tag&&(ue.tag(a,"nfcxAlert"),
ue.count(a,1))},d=function(){h.ue&&uex("ld","nfcxAlert")}});e.when("A").execute(function(b){b.on("a:popover:hide:oneClickInfoPopover",function(b){a("oneClickInfoPopover:popup:close");c()});b.on("a:popover:show:oneClickInfoPopover",function(b){a("oneClickInfoPopover:popup:open");c()});var a=function(a){h.ue&&ue.tag&&(ue.tag(a,""),ue.count(a,1))},c=function(){h.ue&&uex("ld","oneClickInfoPopover")}});e.when("A","ready").execute(function(b){var a=b.state("deviceRestrictionPopoverState"),c=!1;if(a){var d=
a.metricName;b.on("a:popover:beforeShow:"+a.deviceRestrictionPopoverName,function(a){ue&&ue.count&&!c&&(ue.count(d,(ue.count(d)||0)+1),c=!0)})}});e.when("A","ready").execute(function(b){var a=b.state("deviceRestrictionBottomSheetState"),c=!1;if(a){var d=a.metricName;b.on("a:sheet:afterShow:"+a.deviceRestrictionBottomSheetName,function(a){ue&&ue.count&&!c&&(ue.count(d,(ue.count(d)||0)+1),c=!0)})}})});